var modal=document.querySelector(".contact-popup");var modal_open=document.querySelector(".contacts__link");var modal_close=document.querySelector(".contact-popup__close");var modal_nameinput=document.querySelector(".contact-popup__input-name");var modal_emailinput=document.querySelector(".contact-popup__input-email");var modal_textinput=document.querySelector(".contact-popup__input-text");var modal_form=document.querySelector(".contact-popup__form");var isStorageSupport=true;var storage="";var map=document.querySelector(".map-popup");var map_open=document.querySelector(".contacts__open-popup");var map_close=document.querySelector(".map-popup__close");var slides=document.querySelectorAll(".menu__slider__item");var slides_amount=slides.length-1;var slides_current=0;var slides_button=document.querySelectorAll(".menu__slider__nav-item");var pagination=document.querySelectorAll(".menu__slider__pagination__item");var pagination_amount=pagination.length-1;var pagination_current=0;var service_list=document.querySelectorAll(".service__item");var service_blocks=document.querySelectorAll(".service__block");try{storage=localStorage.getItem("name")}catch(err){isStorageSupport=false}modal_open.addEventListener("click",function(a){a.preventDefault();modal.classList.add("modal__opened");if(storage){modal_nameinput.value=localStorage.getItem("name");modal_emailinput.value=localStorage.getItem("email");modal_textinput.focus()}else{modal_nameinput.focus()}});modal_close.addEventListener("click",function(a){a.preventDefault();modal.classList.remove("modal__opened");modal.classList.remove("modal__error")});modal_form.addEventListener("submit",function(a){if(!modal_nameinput.value||!modal_emailinput.value||!modal_textinput.value){a.preventDefault();modal.classList.remove("modal__error");modal.offsetWidth=modal.offsetWidth;modal.classList.add("modal__error")}else{if(isStorageSupport){localStorage.setItem("name",modal_nameinput.value);localStorage.setItem("email",modal_emailinput.value)}}});window.addEventListener("keydown",function(a){if(a.keyCode===27){a.preventDefault();if(modal.classList.contains("modal__opened")){modal.classList.remove("modal__opened");modal.classList.remove("modal__error")}if(map.classList.contains("modal__opened")){map.classList.remove("modal__opened")}}});map_open.addEventListener("click",function(a){a.preventDefault();map.classList.add("modal__opened")});map_close.addEventListener("click",function(a){a.preventDefault();map.classList.remove("modal__opened")});slides_button[0].addEventListener("click",function(a){a.preventDefault();slides[slides_current].classList.remove("menu__slider__active-item");slides_current=slides_current+1;if(slides_current>slides_amount){slides_current=0}slides[slides_current].classList.add("menu__slider__active-item");pagination[pagination_current].classList.remove("menu__slider__pagination__item-active");pagination_current=pagination_current+1;if(pagination_current>pagination_amount){pagination_current=0}pagination[pagination_current].classList.add("menu__slider__pagination__item-active")});slides_button[1].addEventListener("click",function(a){a.preventDefault();slides[slides_current].classList.remove("menu__slider__active-item");slides_current=slides_current-1;if(slides_current<0){slides_current=slides_amount}slides[slides_current].classList.add("menu__slider__active-item");pagination[pagination_current].classList.remove("menu__slider__pagination__item-active");pagination_current=pagination_current-1;if(pagination_current<0){pagination_current=pagination_amount}pagination[pagination_current].classList.add("menu__slider__pagination__item-active")});function switching(a){service_list[a].addEventListener("click",function(b){b.preventDefault();for(var c=0;c<service_list.length;c++){service_list[c].classList.remove("service__active-item");service_blocks[c].classList.remove("service__active-block")}service_list[a].classList.add("service__active-item");service_blocks[a].classList.add("service__active-block")})}var help=[];for(var i=0;i<3;i++){help[i]=switching.bind(this,i)}for(var j=0;j<3;j++){help[j]()};